# Lifting state

## üìù Your Notes

Elaborate on your learnings here in `src/exercise/03.md`

## Background

A common question from React beginners is how to share state between two sibling
components. The answer is to
["lift the state"](https://reactjs.org/docs/lifting-state-up.html) which
basically amounts to finding the lowest common parent shared between the two
components and placing the state management there, and then passing the state
and a mechanism for updating that state down into the components that need it.

## Exercise

Production deploys:

- [Exercise](https://react-hooks-next.netlify.app/isolated/exercise/03.tsx)
- [Final](https://react-hooks-next.netlify.app/isolated/final/03.tsx)

üë®‚Äçüíº Peter told us we've got a new feature request for the `Display` component. He
wants us to display the `animal` the user selects. But that state is managed in
a "sibling" component, so we have to move that management to the least common
parent (`App`) and then pass it down.

## Extra Credit

### 1. üíØ colocating state

[Production deploy](https://react-hooks-next.netlify.app/isolated/final/03.extra-1.tsx)

As a community we‚Äôre pretty good at lifting state. It becomes natural over time.
One thing that we typically have trouble remembering to do is to push state back
down (or
[colocate state](https://kentcdodds.com/blog/state-colocation-will-make-your-react-app-faster)).

üë®‚Äçüíº Peter told us that now users only want the animal displayed instead of the
name:

```javascript
function Display({animal}) {
  return <div>{`Your favorite animal is: ${animal}!`}</div>
}
```

You'll notice that just updating the `Display` component to this works fine, but
for the extra credit, go through the process of moving state to the components
that need it (this type of change happens more often in real applications than
you might realize). Basically, you know what you just did for the `Animal`
component? You need to do the opposite thing for the `Name` component.

ü¶â A lot of folks asked me to add a note here that you really should be reading
the articles included in these instructions. If you skip those you're missing
out on some important learnings üòâ

### 2. üíØ removing unnecessary controlled state

[Production deploy](https://react-hooks-next.netlify.app/isolated/final/03.extra-2.tsx)

You may have noticed by now that the `Name` component doesn't actually need the
`useState` at all to work. We've made the `input` "controlled" by providing the
`value` and `onChange` props, but we're not actually doing anything with that
state and we're not changing the `value` to anything that would be different
from what the browser does by default.

So go ahead and remove the `useState` in the `Name` component.

The point of this extra credit is to just illustrate that just because you have
an `input` doesn't mean it needs to be controlled. You really only need a
controlled input when you're going to programmatically change the `value` of
that input. Otherwise it's just extra work for no benefit.

In a practical situation, you'd do this if you just need to access the value
when the containing form is submitted.

## Closing Thoughts

If this `App` component were what you were actually delivering to your boss,
then I'd suggest you just put everything inside the `App` component rather than
breaking things up into multiple components (read more on this in
[When to break up a component into multiple components](https://kentcdodds.com/blog/when-to-break-up-a-component-into-multiple-components)).

Another topic we'll explore more in the future is "Prop Drilling" which is when
the component that manages state is several parent components away from the one
that's using that state. So you can look forward to that.

State colocation becomes even more important as your application grows, so keep
this in mind as you build larger and more real-world React apps.

## ü¶â Feedback

Fill out
[the feedback form](https://ws.kcd.im/?ws=React%20Hooks%20%F0%9F%8E%A3&e=03%3A%20Lifting%20state&em=).
